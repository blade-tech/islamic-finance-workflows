(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{9544:function(e,t,s){Promise.resolve().then(s.bind(s,1602))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:d,iconNode:u,...m}=e;return(0,n.createElement)("svg",{ref:t,...c,width:r,height:r,stroke:s,strokeWidth:i?24*Number(a)/Number(r):a,className:l("lucide",o),...m},[...u.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let s=(0,n.forwardRef)((s,a)=>{let{className:c,...d}=s;return(0,n.createElement)(o,{ref:a,iconNode:t,className:l("lucide-".concat(r(i(e))),"lucide-".concat(e),c),...d})});return s.displayName=i(e),s}},9322:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2934:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},3577:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},1602:function(e,t,s){"use strict";s.d(t,{MethodologySelector:function(){return N}});var n=s(7437),r=s(2265),a=s(2381),i=s(9820),l=s(5937),c=s(9174),o=s(279),d=s(3245),u=s(3577),m=s(1817),h=s(7689),x=s(1671),f=s(7117),p=s(1723),g=s(5805),j=s(3781);function v(e){let{methodology:t,selected:s=!1,onClick:r,showStats:a=!0}=e,l={mudarabah:"\uD83E\uDD1D",sukuk:"\uD83D\uDCDC",murabaha:"\uD83D\uDCB0",ijara:"\uD83C\uDFE0",musharakah:"\uD83D\uDC65",wakala:"\uD83D\uDD11",takaful:"\uD83D\uDEE1️"};return(0,n.jsx)(i.Zb,{className:"cursor-pointer transition-all hover:border-primary ".concat(s?"border-primary bg-primary/5":""),onClick:r,children:(0,n.jsx)(i.Ol,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,n.jsx)("span",{className:"text-2xl flex-shrink-0",children:t.category&&l[t.category]?l[t.category]:"\uD83D\uDCCB"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)(i.ll,{className:"text-base line-clamp-2 mb-2",children:t.name}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-1 mb-2",children:[(0,n.jsx)(c.C,{variant:{active:"default",draft:"secondary",archived:"outline"}[t.status],className:"text-xs",children:t.status}),t.standard&&(0,n.jsx)(c.C,{variant:"secondary",className:"text-xs",children:t.standard}),t.category&&(0,n.jsx)(c.C,{variant:"outline",className:"text-xs capitalize",children:t.category})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(f.Z,{className:"h-3 w-3"}),(0,n.jsxs)("span",{children:[t.schemaCount," schemas"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(j.Z,{className:"h-3 w-3"}),(0,n.jsxs)("span",{children:[t.policySteps," steps"]})]})]}),a&&t.applicationCount>0&&(0,n.jsx)("div",{className:"mt-2 pt-2 border-t",children:(0,n.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,n.jsxs)("span",{children:[t.applicationCount," applications"]}),(0,n.jsx)("span",{children:"•"}),(0,n.jsxs)("span",{children:[(100*t.successRate).toFixed(0),"% success"]})]})})]})]}),s&&(0,n.jsx)(x.Z,{className:"h-5 w-5 text-primary flex-shrink-0"})]})})})}var y=s(9192);function N(){let{selectedMethodologies:e,onSelectionChange:t,showActionButtons:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[j,N]=(0,r.useState)([]),[w,C]=(0,r.useState)([]),k=void 0!==e?e:w,b=e=>{t?t("function"==typeof e?e(k):e):C(e)},[S,Z]=(0,r.useState)(!0),[z,D]=(0,r.useState)(null),[E,M]=(0,r.useState)(!1),[A,$]=(0,r.useState)(!1),[R,_]=(0,r.useState)({}),[P,L]=(0,r.useState)("");(0,r.useEffect)(()=>{!async function(){try{Z(!0);let e=new URLSearchParams;R.type&&e.append("type",R.type),R.category&&e.append("category",R.category),R.standard&&e.append("standard",R.standard),R.status&&e.append("status",R.status),P&&e.append("search",P);let t=await fetch("".concat("http://localhost:8001","/api/methodologies?").concat(e.toString()));if(!t.ok)throw Error("Failed to fetch methodologies: ".concat(t.statusText));let s=await t.json();N(s.methodologies||[]),M(!0)}catch(e){console.error("Failed to load methodologies:",e),D("Failed to load methodologies. Please check if the backend is running on port 8000.")}finally{Z(!1)}}()},[R,P]);let O=e=>{b(t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e]),$(!1)};return(0,n.jsxs)("div",{className:"space-y-6",children:[E&&(0,n.jsxs)(l.bZ,{variant:"default",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),(0,n.jsx)(l.Cd,{children:"Mock Data"}),(0,n.jsx)(l.X,{children:"Currently showing mock methodologies. Guardian integration coming soon."})]}),(0,n.jsxs)(l.bZ,{variant:"info",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),(0,n.jsx)(l.Cd,{children:"Methodology Selection"}),(0,n.jsx)(l.X,{children:"Select an existing digitized methodology or upload a document to create a new one. Methodologies define the structure, schemas, and policy steps for Islamic finance workflows."})]}),z&&(0,n.jsxs)(l.bZ,{variant:"destructive",children:[(0,n.jsx)(l.Cd,{children:"Error Loading Methodologies"}),(0,n.jsx)(l.X,{children:z})]}),!S&&!z&&(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4"}),(0,n.jsx)(i.ll,{className:"text-base",children:"Filters"})]})}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[(0,n.jsx)(o.I,{placeholder:"Search methodologies...",value:P,onChange:e=>L(e.target.value)}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Type"}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)(a.z,{variant:R.type?"outline":"default",size:"sm",onClick:()=>_({...R,type:void 0}),children:"All"}),(0,n.jsx)(a.z,{variant:"islamic-finance"===R.type?"default":"outline",size:"sm",onClick:()=>_({...R,type:"islamic-finance"}),children:"Islamic Finance"}),(0,n.jsx)(a.z,{variant:"environmental"===R.type?"default":"outline",size:"sm",onClick:()=>_({...R,type:"environmental"}),children:"Environmental"}),(0,n.jsx)(a.z,{variant:"social"===R.type?"default":"outline",size:"sm",onClick:()=>_({...R,type:"social"}),children:"Social"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Status"}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)(a.z,{variant:R.status?"outline":"default",size:"sm",onClick:()=>_({...R,status:void 0}),children:"All"}),(0,n.jsx)(a.z,{variant:"active"===R.status?"default":"outline",size:"sm",onClick:()=>_({...R,status:"active"}),children:"Active"}),(0,n.jsx)(a.z,{variant:"draft"===R.status?"default":"outline",size:"sm",onClick:()=>_({...R,status:"draft"}),children:"Draft"}),(0,n.jsx)(a.z,{variant:"archived"===R.status?"default":"outline",size:"sm",onClick:()=>_({...R,status:"archived"}),children:"Archived"})]})]})]})]}),S&&(0,n.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,n.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,n.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading methodologies..."})]}),!S&&!z&&(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("h3",{className:"text-sm font-medium text-muted-foreground",children:["Available Methodologies (",j.length,")"]}),k.length>0&&(0,n.jsxs)(c.C,{variant:"default",children:[k.length," selected"]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[k.length>0&&(0,n.jsx)(a.z,{variant:"ghost",size:"sm",onClick:()=>{b([])},children:"Clear Selection"}),(0,n.jsxs)(a.z,{variant:"outline",size:"sm",onClick:()=>{$(!0)},children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Upload New"]})]})]}),(0,n.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:0===j.length?(0,n.jsx)(i.Zb,{children:(0,n.jsx)(i.aY,{className:"py-12 text-center text-muted-foreground",children:"No methodologies found matching your filters."})}):j.map(e=>(0,n.jsx)(v,{methodology:e,selected:k.some(t=>t.id===e.id),onClick:()=>O(e),showStats:!0},e.id))})]}),(0,n.jsx)("div",{className:"lg:sticky lg:top-4 lg:self-start",children:k.length>0?(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:1===k.length?k[0].name:"Combined Methodologies (".concat(k.length,")")}),(0,n.jsx)(i.SZ,{children:1===k.length?k[0].description:"Selected ".concat(k.length," methodologies to combine into workflow")})]}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[k.length>1&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Selected Methodologies:"}),(0,n.jsx)("div",{className:"space-y-1",children:k.map(e=>(0,n.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"h-3 w-3 text-green-600"}),(0,n.jsx)("span",{children:e.name})]},e.id))})]}),(0,n.jsxs)("div",{className:"p-4 bg-muted rounded-md space-y-3",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Combined Components:"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsx)("span",{className:"font-medium",children:k.reduce((e,t)=>e+t.schemaCount,0)}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"total data schemas"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsx)("span",{className:"font-medium",children:k.reduce((e,t)=>e+t.policySteps,0)}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"total policy steps"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsx)("span",{className:"font-medium",children:new Set(k.flatMap(e=>e.requiredRoles)).size}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"unique roles required"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:"All Required Roles"})]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:Array.from(new Set(k.flatMap(e=>e.requiredRoles))).map((e,t)=>(0,n.jsx)(c.C,{variant:"outline",className:"text-xs",children:e},t))})]}),s&&(0,n.jsx)(a.z,{className:"w-full",size:"lg",children:1===k.length?"Apply This Methodology":"Combine ".concat(k.length," Methodologies")})]})]}):A?(0,n.jsx)(y.N,{}):(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Methodology Preview"}),(0,n.jsx)(i.SZ,{children:'Select a methodology from the left to see details, or click "Upload New" to digitize a new methodology'})]}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"flex items-center justify-center py-12 text-muted-foreground",children:(0,n.jsx)(f.Z,{className:"h-12 w-12"})})})]})})]})]})}},6741:function(e,t,s){"use strict";function n(e,t,{checkForDefaultPrevented:s=!0}={}){return function(n){if(e?.(n),!1===s||!n.defaultPrevented)return t?.(n)}}s.d(t,{Mj:function(){return n}}),"undefined"!=typeof window&&window.document&&window.document.createElement},3966:function(e,t,s){"use strict";s.d(t,{b:function(){return i},k:function(){return a}});var n=s(2265),r=s(7437);function a(e,t){let s=n.createContext(t),a=e=>{let{children:t,...a}=e,i=n.useMemo(()=>a,Object.values(a));return(0,r.jsx)(s.Provider,{value:i,children:t})};return a.displayName=e+"Provider",[a,function(r){let a=n.useContext(s);if(a)return a;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function i(e,t=[]){let s=[],a=()=>{let t=s.map(e=>n.createContext(e));return function(s){let r=s?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...s,[e]:r}}),[s,r])}};return a.scopeName=e,[function(t,a){let i=n.createContext(a),l=s.length;s=[...s,a];let c=t=>{let{scope:s,children:a,...c}=t,o=s?.[e]?.[l]||i,d=n.useMemo(()=>c,Object.values(c));return(0,r.jsx)(o.Provider,{value:d,children:a})};return c.displayName=t+"Provider",[c,function(s,r){let c=r?.[e]?.[l]||i,o=n.useContext(c);if(o)return o;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=s.reduce((t,{useScope:s,scopeName:n})=>{let r=s(e)[`__scope${n}`];return{...t,...r}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}(a,...t)]}},9255:function(e,t,s){"use strict";s.d(t,{M:function(){return c}});var n,r=s(2265),a=s(1188),i=(n||(n=s.t(r,2)))[" useId ".trim().toString()]||(()=>void 0),l=0;function c(e){let[t,s]=r.useState(i());return(0,a.b)(()=>{e||s(e=>e??String(l++))},[e]),e||(t?`radix-${t}`:"")}},6840:function(e,t,s){"use strict";s.d(t,{WV:function(){return l},jH:function(){return c}});var n=s(2265),r=s(4887),a=s(7495),i=s(7437),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.Z8)(`Primitive.${t}`),r=n.forwardRef((e,n)=>{let{asChild:r,...a}=e,l=r?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l,{...a,ref:n})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function c(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}},6606:function(e,t,s){"use strict";s.d(t,{W:function(){return r}});var n=s(2265);function r(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}},886:function(e,t,s){"use strict";s.d(t,{T:function(){return l}});var n,r=s(2265),a=s(1188),i=(n||(n=s.t(r,2)))[" useInsertionEffect ".trim().toString()]||a.b;function l({prop:e,defaultProp:t,onChange:s=()=>{},caller:n}){let[a,l,c]=function({defaultProp:e,onChange:t}){let[s,n]=r.useState(e),a=r.useRef(s),l=r.useRef(t);return i(()=>{l.current=t},[t]),r.useEffect(()=>{a.current!==s&&(l.current?.(s),a.current=s)},[s,a]),[s,n,l]}({defaultProp:t,onChange:s}),o=void 0!==e,d=o?e:a;{let t=r.useRef(void 0!==e);r.useEffect(()=>{let e=t.current;if(e!==o){let t=o?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=o},[o,n])}return[d,r.useCallback(t=>{if(o){let s="function"==typeof t?t(e):t;s!==e&&c.current?.(s)}else l(t)},[o,e,l,c])]}Symbol("RADIX:SYNC_STATE")},1188:function(e,t,s){"use strict";s.d(t,{b:function(){return r}});var n=s(2265),r=globalThis?.document?n.useLayoutEffect:()=>{}}},function(e){e.O(0,[569,333,605,659,804,321,498,971,117,744],function(){return e(e.s=9544)}),_N_E=e.O()}]);
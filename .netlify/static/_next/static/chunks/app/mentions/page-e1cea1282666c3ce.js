(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{426:function(e,t,s){Promise.resolve().then(s.bind(s,7794))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:d,iconNode:u,...h}=e;return(0,n.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:s,strokeWidth:i?24*Number(a)/Number(r):a,className:c("lucide",o),...h},[...u.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let s=(0,n.forwardRef)((s,a)=>{let{className:l,...d}=s;return(0,n.createElement)(o,{ref:a,iconNode:t,className:c("lucide-".concat(r(i(e))),"lucide-".concat(e),l),...d})});return s.displayName=i(e),s}},6858:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2655:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("at-sign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]])},4766:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},3468:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},3417:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},7794:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var n=s(7437),r=s(2265),a=s(6093),i=s(2381),c=s(279),l=s(9174),o=s(9820),d=s(2655),u=s(8736),h=s(3247),m=s(2489),x=s(6858),f=s(3417),p=s(1047),g=s(6965),b=s(7648);function j(){let[e,t]=(0,r.useState)([]),[s,j]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[N,w]=(0,r.useState)(""),Z="current_user@example.com";(0,r.useEffect)(()=>{k()},[]),(0,r.useEffect)(()=>{_()},[e,N]);let k=async()=>{try{v(!0);let e=await g.F.api("/api/users/".concat(Z,"/mentions"),{method:"GET"});t(e.comments||[])}catch(e){console.error("Failed to load mentions:",e)}finally{v(!1)}},_=()=>{let t=[...e];if(N){let e=N.toLowerCase();t=t.filter(t=>t.content.toLowerCase().includes(e)||t.author_name.toLowerCase().includes(e)||t.contract_id.toLowerCase().includes(e))}j(t)},C=e=>({business_team:"bg-blue-100 text-blue-800",shariah_advisor:"bg-green-100 text-green-800",legal_counsel:"bg-purple-100 text-purple-800",compliance_manager:"bg-orange-100 text-orange-800",finance_team:"bg-pink-100 text-pink-800"})[e]||"bg-gray-100 text-gray-800",M=e=>({business_team:"Business",shariah_advisor:"Shariah",legal_counsel:"Legal",compliance_manager:"Compliance",finance_team:"Finance"})[e]||e,A=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),n=Math.floor(s/6e4),r=Math.floor(s/36e5),a=Math.floor(s/864e5);return n<1?"just now":n<60?"".concat(n,"m ago"):r<24?"".concat(r,"h ago"):a<7?"".concat(a,"d ago"):t.toLocaleDateString()},z=e=>e.split(/@([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/g).map((e,t)=>{if(t%2==1){let s=e===Z;return(0,n.jsxs)("span",{className:"font-medium ".concat(s?"text-blue-600 bg-blue-50 px-1 rounded":"text-blue-600"),children:["@",e]},t)}return e}),S=e=>{let t="/contracts/".concat(e.contract_id,"/collaborate");return void 0!==e.step_number?"".concat(t,"?tab=comments&step=").concat(e.step_number):"".concat(t,"?tab=comments")},L=s.reduce((e,t)=>{let s=t.contract_id;return e[s]||(e[s]=[]),e[s].push(t),e},{});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.M,{}),(0,n.jsxs)("div",{className:"container mx-auto py-8 max-w-5xl space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,n.jsx)(d.Z,{className:"h-8 w-8"}),"My Mentions"]}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Comments where you were @mentioned"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"Total Mentions"}),(0,n.jsx)(d.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"All time"})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"Contracts"}),(0,n.jsx)(u.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:Object.keys(L).length}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"With mentions"})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"Filtered"}),(0,n.jsx)(h.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:s.length}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Current view"})]})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsx)(o.Ol,{children:(0,n.jsx)(o.ll,{className:"text-lg",children:"Search Mentions"})}),(0,n.jsx)(o.aY,{children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)("div",{className:"relative flex-1",children:[(0,n.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,n.jsx)(c.I,{placeholder:"Search by content, author, or contract...",value:N,onChange:e=>w(e.target.value),className:"pl-9"})]}),N&&(0,n.jsx)(i.z,{variant:"ghost",onClick:()=>w(""),children:(0,n.jsx)(m.Z,{className:"h-4 w-4"})})]})})]}),y?(0,n.jsx)(o.Zb,{children:(0,n.jsx)(o.aY,{className:"py-12 text-center text-gray-500",children:"Loading mentions..."})}):0===s.length?(0,n.jsx)(o.Zb,{children:(0,n.jsxs)(o.aY,{className:"py-12 text-center",children:[(0,n.jsx)(d.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Mentions"}),(0,n.jsx)("p",{className:"text-gray-500",children:N?"No mentions match your search":"You haven't been mentioned in any comments yet"})]})}):(0,n.jsx)("div",{className:"space-y-6",children:Object.entries(L).map(e=>{let[t,s]=e;return(0,n.jsxs)(o.Zb,{children:[(0,n.jsx)(o.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(u.Z,{className:"h-5 w-5"}),"Contract ",t]}),(0,n.jsxs)(o.SZ,{children:[s.length," mention",s.length>1?"s":""]})]}),(0,n.jsx)(b.default,{href:"/contracts/".concat(t,"/collaborate"),children:(0,n.jsxs)(i.z,{variant:"outline",size:"sm",children:["View Contract",(0,n.jsx)(x.Z,{className:"h-4 w-4 ml-2"})]})})]})}),(0,n.jsx)(o.aY,{className:"space-y-4",children:s.map(e=>(0,n.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"}),(0,n.jsx)("span",{className:"font-medium",children:e.author_name}),(0,n.jsx)(l.C,{className:C(e.author_role),variant:"secondary",children:M(e.author_role)}),void 0!==e.step_number&&(0,n.jsxs)(l.C,{variant:"outline",children:["Step ",e.step_number]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(p.Z,{className:"h-3 w-3"}),A(e.created_at)]}),e.edited&&(0,n.jsx)("span",{children:"(edited)"})]})]}),(0,n.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-3 pl-6",children:z(e.content)}),e.mentions.length>1&&(0,n.jsxs)("div",{className:"flex items-center gap-2 pl-6 text-xs text-gray-500",children:[(0,n.jsx)("span",{children:"Also mentioned:"}),e.mentions.filter(e=>e!==Z).map((e,t)=>(0,n.jsxs)(l.C,{variant:"outline",className:"text-xs",children:["@",e]},t))]}),(0,n.jsx)("div",{className:"flex justify-end mt-3 pt-3 border-t",children:(0,n.jsx)(b.default,{href:S(e),children:(0,n.jsxs)(i.z,{size:"sm",variant:"outline",children:["View Comment",(0,n.jsx)(x.Z,{className:"h-4 w-4 ml-2"})]})})})]},e.comment_id))})]},t)})}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsx)(o.Ol,{children:(0,n.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(f.Z,{className:"h-5 w-5"}),"About Mentions"]})}),(0,n.jsx)(o.aY,{children:(0,n.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,n.jsx)("p",{children:"• Use @email in comments to mention someone and notify them"}),(0,n.jsx)("p",{children:"• Mentioned users receive notifications based on their preferences"}),(0,n.jsx)("p",{children:'• Click "View Comment" to see the full conversation and reply'}),(0,n.jsx)("p",{children:"• Mentions are highlighted in blue for easy identification"})]})})]})]})]})}},6093:function(e,t,s){"use strict";s.d(t,{M:function(){return u}});var n=s(7437),r=s(7648),a=s(9376),i=s(9174),c=s(3468),l=s(933),o=s(2655),d=s(4766);function u(){let e=(0,a.usePathname)(),t=[{href:"/collaboration",label:"Overview",icon:c.Z,isActive:"/collaboration"===e,count:null},{href:"/tasks",label:"Tasks",icon:l.Z,isActive:e.startsWith("/tasks"),count:0},{href:"/mentions",label:"Mentions",icon:o.Z,isActive:e.startsWith("/mentions"),count:0},{href:"/notifications",label:"Notifications",icon:d.Z,isActive:e.startsWith("/notifications"),count:0}];return(0,n.jsx)("div",{className:"border-b bg-background",children:(0,n.jsx)("div",{className:"container mx-auto px-4",children:(0,n.jsx)("nav",{className:"flex space-x-6 overflow-x-auto",children:t.map(e=>{let t=e.icon;return(0,n.jsxs)(r.default,{href:e.href,className:"\n                  flex items-center gap-2 px-1 py-3 border-b-2 text-sm font-medium transition-colors\n                  whitespace-nowrap\n                  ".concat(e.isActive?"border-primary text-foreground":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted","\n                "),children:[(0,n.jsx)(t,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:e.label}),null!==e.count&&e.count>0&&(0,n.jsx)(i.C,{variant:"secondary",className:"ml-1",children:e.count>99?"99+":e.count})]},e.href)})})})})}},9174:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var n=s(7437),r=s(2265),a=s(535),i=s(3448);let c=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),l=r.forwardRef((e,t)=>{let{className:s,variant:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)(c({variant:r}),s),...a})});l.displayName="Badge"},279:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var n=s(7437),r=s(2265),a=s(3448);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,n.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"}},function(e){e.O(0,[569,648,804,971,117,744],function(){return e(e.s=426)}),_N_E=e.O()}]);
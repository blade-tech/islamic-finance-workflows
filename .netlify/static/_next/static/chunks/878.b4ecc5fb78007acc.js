"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{8574:function(t,e,r){r.d(e,{parseSSEStream:function(){return a}});async function a(t,e,r){let a="".concat("http://localhost:8001","/api/workflows/").concat(t,"/stream");try{let t=await fetch(a,{signal:r});if(!t.ok)throw Error("HTTP ".concat(t.status,": ").concat(t.statusText));if(!t.body)throw Error("Response body is null - no stream available");let o=t.body.getReader(),n=new TextDecoder("utf-8"),s="";for(;;){let{value:t,done:r}=await o.read();if(r)break;let a=n.decode(t,{stream:!0}),c=(s+=a).split("\n");s=c.pop()||"";let i={};for(let t of c){if(""===t.trim()){i.event&&i.data&&(function(t,e){try{let r=JSON.parse(t.data);switch(t.event){case"chunk":void 0!==r.text&&e.onChunk(r.text);break;case"status":r.status&&e.onStatus(r.status);break;case"error":r.error&&e.onError(r.error)}}catch(t){}}(i,e),i={});continue}if(!t.startsWith(":")){if(t.startsWith("event:")){i.event=t.slice(6).trim();continue}if(t.startsWith("data:")){let e=t.slice(5).trim();i.data=i.data?i.data+"\n"+e:e;continue}}}}e.onDone()}catch(r){if(r instanceof Error&&"AbortError"===r.name)return;let t=r instanceof Error?r.message:"Unknown streaming error";throw e.onError(t),r}}}}]);